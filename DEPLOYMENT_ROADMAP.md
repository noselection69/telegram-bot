# 🗺️ ДОРОЖНАЯ КАРТА ДЕПЛОЯ

## 📌 Где что находится

### 📚 Документация по деплою

| Документ | Для кого | Время читания | Что это |
|----------|----------|---------------|---------|
| **QUICK_DEPLOY.md** | ⚡ Спешишь? | 5 мин | Быстрый старт (рекомендуется начать отсюда!) |
| **DEPLOY.md** | 📖 Хочешь разобраться | 20 мин | Полная инструкция по всем хостингам |
| **HOSTING_COMPARISON.md** | 🤔 Выбираешь хостинг | 15 мин | Сравнение Railway, Render, VPS и др. |
| **DEPLOY_CHECKLIST.md** | ✅ Проверяешь готовность | 10 мин | Полный чек-лист перед деплоем |
| **GITHUB_SETUP.md** | 🐙 Настраиваешь GitHub | 10 мин | Как залить код на GitHub для автодеплоя |

### 🛠️ Готовые файлы для деплоя

| Файл | Назначение | Статус |
|------|-----------|--------|
| `Procfile` | Конфигурация для Railway/Heroku | ✅ Готов |
| `railway.toml` | Параметры Railway | ✅ Готов |
| `Dockerfile` | Docker образ | ✅ Готов |
| `requirements.txt` | Зависимости Python | ✅ Обновлен (gunicorn добавлен) |
| `.gitignore` | Что не заливать на GitHub | ✅ Актуален |
| `.env.example` | Пример переменных окружения | ✅ Создан |

### 🎯 Вспомогательные скрипты

| Скрипт | ОС | Что делает |
|--------|-----|-----------|
| `deploy.sh` | Linux/Mac | Подготавливает проект к деплою |
| `deploy.bat` | Windows | Подготавливает проект к деплою |
| `prepare_deploy.py` | Все | Python скрипт подготовки |

---

## ⏱️ ПЛАН ДЕПЛОЯ (по времени)

### Вариант 1: Railway (РЕКОМЕНДУЕТСЯ) - 15-20 минут

```
🚀 Шаг 1: GitHub подготовка (5 мин)
   └─ Создать репозиторий
   └─ Залить код на GitHub

🚀 Шаг 2: Railway регистрация (3 мин)
   └─ Зарегистрироваться
   └─ Нажать "Deploy from GitHub"

🚀 Шаг 3: Настройка переменных (5 мин)
   └─ Добавить BOT_TOKEN
   └─ Добавить WEBHOOK_URL

🚀 Шаг 4: Проверка (2 мин)
   └─ Посмотреть логи
   └─ Протестировать бота

✅ ГОТОВО! Бот работает 24/7
```

### Вариант 2: Render.com - 20-25 минут

```
🚀 Шаг 1: GitHub подготовка (5 мин)
🚀 Шаг 2: Render регистрация (3 мин)
🚀 Шаг 3: Настройка Web Service (7 мин)
🚀 Шаг 4: Переменные окружения (3 мин)
🚀 Шаг 5: Проверка (2 мин)
✅ ГОТОВО!
```

### Вариант 3: VPS - 30-60 минут (нужны знания Linux)

```
🚀 Шаг 1: Выбрать и заказать VPS (5 мин)
🚀 Шаг 2: SSH подключение (5 мин)
🚀 Шаг 3: Установка Python и зависимостей (10 мин)
🚀 Шаг 4: Клонирование проекта (5 мин)
🚀 Шаг 5: Настройка systemd сервиса (10 мин)
🚀 Шаг 6: Проверка (5 мин)
✅ ГОТОВО!
```

---

## 🎯 СЕЙЧАС НУЖНО СДЕЛАТЬ

### Немедленно (перед деплоем):

- [ ] Прочитать `QUICK_DEPLOY.md` (5 минут)
- [ ] Создать GitHub репозиторий (следуй `GITHUB_SETUP.md`)
- [ ] Залить код на GitHub
- [ ] Зарегистрироваться на Railway (рекомендуется)
- [ ] Добавить переменные окружения
- [ ] Протестировать бота

### Перед тем как идти в production:

- [ ] Убедиться что локально всё работает: `python -m bot.main`
- [ ] Проверить чек-лист: `DEPLOY_CHECKLIST.md`
- [ ] Убедиться что `.env` не в GitHub
- [ ] Убедиться что BOT_TOKEN правильный

---

## 🏃 БЫСТРЫЙ СТАРТ (тебе нужно)

### 5 минут на Railway:

```bash
# Шаг 1: Подготовка GitHub
cd d:\bot
git init
git add .
git commit -m "Deploy ready"
git remote add origin https://github.com/YOUR_USERNAME/telegram-bot.git
git push -u origin main

# Шаг 2: На браузере
# - Перейди https://railway.app
# - "Start Project" → "Deploy from GitHub"
# - Выбери репозиторий
# - Добавь переменные:
#   BOT_TOKEN = ваш_токен
#   WEBHOOK_URL = https://app-name.railway.app

# Шаг 3: Ждёшь 2-3 минуты
# Шаг 4: Тестируешь в Telegram

# ✅ ГОТОВО!
```

---

## 📖 ПОЛНОЕ ОБЪЯСНЕНИЕ (для понимания)

### Что происходит при деплое?

```
┌─────────────────────────────────────────────┐
│ Ты пушишь код на GitHub                     │
└────────────┬────────────────────────────────┘
             │
             ▼
┌─────────────────────────────────────────────┐
│ Railway видит новый push                    │
└────────────┬────────────────────────────────┘
             │
             ▼
┌─────────────────────────────────────────────┐
│ Railway клонирует репозиторий               │
└────────────┬────────────────────────────────┘
             │
             ▼
┌─────────────────────────────────────────────┐
│ Railway устанавливает зависимости           │
│ (из requirements.txt)                       │
└────────────┬────────────────────────────────┘
             │
             ▼
┌─────────────────────────────────────────────┐
│ Railway запускает бота по Procfile:         │
│ python -m bot.main                          │
└────────────┬────────────────────────────────┘
             │
             ▼
┌─────────────────────────────────────────────┐
│ ✅ БОТ РАБОТАЕТ 24/7 НА ХОСТИНГЕ            │
│ URL: https://app-name.railway.app           │
└─────────────────────────────────────────────┘
```

### Переменные окружения:

```
На локальной машине:          На Railway (хостинге):
.env                          Dashboard → Environment
├─ BOT_TOKEN                  ├─ BOT_TOKEN (одинаковый!)
├─ FLASK_ENV=dev              ├─ FLASK_ENV=production
└─ DEBUG=True                 └─ DEBUG=False
```

### Файлы:

```
telegram-bot/
├─ bot/
│  ├─ main.py              ← Запуск бота
│  ├─ web/
│  │  ├─ app.py            ← Flask сервер
│  │  ├─ static/
│  │  │  ├─ app.js         ← JavaScript
│  │  │  └─ style.css      ← Стили (с темами!)
│  │  └─ templates/
│  │     └─ index.html     ← Web App
│  ├─ models/              ← БД модели
│  ├─ handlers/            ← Обработчики команд
│  └─ tasks/               ← Фоновые задачи
├─ requirements.txt        ← Зависимости (обновлен!)
├─ Procfile               ← Конфиг Railway (готов!)
├─ railway.toml           ← Параметры Railway (готов!)
├─ .env                   ← Переменные (не коммитить!)
├─ .gitignore            ← Что не коммитить (готов!)
└─ .env.example          ← Пример переменных (готов!)
```

---

## ✅ ФИНАЛЬНЫЙ ЧЕКЛИСТ

Перед деплоем убедись:

- [ ] **GitHub:**
  - [ ] Репозиторий создан
  - [ ] PUBLIC (не Private!)
  - [ ] Код залит на GitHub
  - [ ] `requirements.txt` обновлен (gunicorn в списке)
  - [ ] `Procfile` существует
  - [ ] `.env` в `.gitignore`

- [ ] **Локально протестировано:**
  - [ ] `/start` работает
  - [ ] Web App открывается
  - [ ] Добавление товара работает
  - [ ] Темная/светлая тема переключается

- [ ] **Хостинг готов:**
  - [ ] Railway/Render/VPS выбран
  - [ ] Аккаунт создан
  - [ ] Переменные готовы добавить

- [ ] **Переменные окружения:**
  - [ ] BOT_TOKEN получен и протестирован
  - [ ] WEBHOOK_URL подготовлен
  - [ ] FLASK_ENV установлен на production

---

## 🎉 ГОТОВ?

### Начни отсюда:

1. **Прочитай** `QUICK_DEPLOY.md` (5 мин)
2. **Следуй** `GITHUB_SETUP.md` (10 мин)
3. **Выполни** инструкции Railway (5 мин)
4. **Протестируй** в Telegram

**Итого: 20 минут и бот работает! ⚡**

---

## 🆘 ПОМОЩЬ

| Проблема | Решение |
|----------|---------|
| Не понимаю что делать | Читай `QUICK_DEPLOY.md` |
| Выбираю хостинг | Смотри `HOSTING_COMPARISON.md` |
| GitHub не работает | Посмотри `GITHUB_SETUP.md` |
| Проверяю готовность | Используй `DEPLOY_CHECKLIST.md` |
| Нужна полная инструкция | Читай `DEPLOY.md` |
| Бот не работает | Смотри логи на Railway → обычно там ответ |

---

**Удачи! Твой бот скоро будет работать 24/7! 🚀**

Вопросы? Я помогу! 💬
