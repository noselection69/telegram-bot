# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

## ğŸ“Š ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
telegram-finance-bot/
â”œâ”€â”€ bot/                          # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py                # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ñ‚Ğ¾ĞºĞµĞ½, Ğ‘Ğ” URL, Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾ÑÑ)
â”‚   â”œâ”€â”€ main.py                  # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ», Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                  # ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ database.py          # SQLAlchemy Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ (User, Item, Sale, Car, Rental)
â”‚   â”‚   â””â”€â”€ init_db.py           # Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ” Ğ¸ ÑĞµÑÑĞ¸Ğ¹
â”‚   â”‚
â”‚   â”œâ”€â”€ handlers/                # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¸ callback'Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ navigation.py        # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ, Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ°Ğ¼Ğ¸
â”‚   â”‚   â”œâ”€â”€ resell.py            # ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ¿ĞµÑ€ĞµĞºÑƒĞ¿Ğ° (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ, Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²)
â”‚   â”‚   â”œâ”€â”€ rental.py            # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ°Ñ€ĞµĞ½Ğ´Ğ¾Ğ¹ (Ğ°Ğ²Ñ‚Ğ¾, Ğ°Ñ€ĞµĞ½Ğ´Ñ‹)
â”‚   â”‚   â””â”€â”€ statistics.py        # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° (Ğ¿Ğ¾ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ°Ğ¼)
â”‚   â”‚
â”‚   â”œâ”€â”€ keyboards/               # ĞšĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ keyboards.py         # Ğ’ÑĞµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ¸ Ğ¼ĞµĞ½Ñ
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                   # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ datetime_helper.py   # Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ´Ğ°Ñ‚Ğ°Ğ¼Ğ¸ Ğ¸ Ñ‡Ğ°ÑĞ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾ÑÑĞ°Ğ¼Ğ¸
â”‚   â”‚   â””â”€â”€ statistics.py        # Ğ Ğ°ÑÑ‡ĞµÑ‚ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸
â”‚   â”‚
â”‚   â””â”€â”€ tasks/                   # Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ notifications.py     # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾ĞºĞ¾Ğ½Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ°Ñ€ĞµĞ½Ğ´Ñ‹ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹
â”‚
â”œâ”€â”€ .env                         # ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ (Ğ½Ğµ Ğ² Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸)
â”œâ”€â”€ .env.example                # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”œâ”€â”€ .gitignore                  # Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ Git
â”œâ”€â”€ requirements.txt            # Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Python
â”œâ”€â”€ start_bot.bat              # Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° (Windows)
â”œâ”€â”€ start_bot.sh               # Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° (Linux/Mac)
â”œâ”€â”€ README.md                  # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ QUICKSTART.md              # Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚
â”œâ”€â”€ DOCS.md                    # Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â””â”€â”€ ARCHITECTURE.md            # Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ»
```

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ¿ĞµÑ€ĞµĞºÑƒĞ¿Ğ°

```
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
    â†“
/start â†’ Navigation.start_handler
    â†“
"ğŸ“Š ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€" â†’ Resell.show_resell_menu
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. "â• ĞšÑƒĞ¿Ğ¸Ğ»"                       â”‚
â”‚    â†’ add_item_start               â”‚
â”‚    â†’ (FSM States)                 â”‚
â”‚    â†’ receive_item_name            â”‚
â”‚    â†’ receive_item_category        â”‚
â”‚    â†’ receive_item_price           â”‚
â”‚    â†’ receive_item_comment         â”‚
â”‚    â†’ receive_item_photo           â”‚
â”‚    â†’ (Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ² Ğ‘Ğ” Item)        â”‚
â”‚                                  â”‚
â”‚ 2. "ğŸ“‹ Ğ˜Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ"                 â”‚
â”‚    â†’ show_inventory               â”‚
â”‚    â†’ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² (Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ½Ñ‹)  â”‚
â”‚    â†’ ĞšĞ»Ğ¸Ğº Ğ½Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€ â†’ sell_item    â”‚
â”‚    â†’ receive_sell_price           â”‚
â”‚    â†’ (Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Sale)        â”‚
â”‚                                  â”‚
â”‚ 3. "ğŸ“ˆ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°"                â”‚
â”‚    â†’ show_resell_statistics_menu  â”‚
â”‚    â†’ Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ° (Ğ´ĞµĞ½ÑŒ/Ğ½ĞµĞ´ĞµĞ»Ñ)  â”‚
â”‚    â†’ show_resell_statistics       â”‚
â”‚    â†’ ResellStatistics.get_*       â”‚
â”‚    â†’ (Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ±Ñ‹Ğ»ÑŒ)          â”‚
â”‚                                  â”‚
â”‚ 4. "ğŸ“œ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ"                   â”‚
â”‚    â†’ show_sales_history           â”‚
â”‚    â†’ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶          â”‚
â”‚    â†’ (ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ°Ñ€ĞµĞ½Ğ´Ğ¾Ğ¹

```
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
    â†“
/start â†’ Navigation.start_handler
    â†“
"ğŸš— ĞÑ€ĞµĞ½Ğ´Ğ°" â†’ Rental.show_rental_menu
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. "â• Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ°Ğ²Ñ‚Ğ¾"                       â”‚
â”‚    â†’ add_car_start                         â”‚
â”‚    â†’ (FSM States)                          â”‚
â”‚    â†’ receive_car_name                      â”‚
â”‚    â†’ receive_car_cost                      â”‚
â”‚    â†’ (Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ² Ğ‘Ğ” Car)                  â”‚
â”‚                                           â”‚
â”‚ 2. "ğŸš— ĞœĞ¾Ğ¸ Ğ°Ğ²Ñ‚Ğ¾"                           â”‚
â”‚    â†’ show_my_cars                          â”‚
â”‚    â†’ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»ĞµĞ¹                    â”‚
â”‚    â†’ view_car_options                      â”‚
â”‚    â”œâ”€ "ğŸ’° Ğ¡Ğ´Ğ°Ğ» Ğ² Ğ°Ñ€ĞµĞ½Ğ´Ñƒ"                   â”‚
â”‚    â”‚  â†’ rent_car_start                     â”‚
â”‚    â”‚  â†’ (FSM States)                       â”‚
â”‚    â”‚  â†’ receive_rental_price               â”‚
â”‚    â”‚  â†’ receive_rental_hours               â”‚
â”‚    â”‚  â†’ receive_rental_end_time            â”‚
â”‚    â”‚  â†’ (Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Rental)            â”‚
â”‚    â”‚  â†’ (Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ğ°Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚)      â”‚
â”‚    â”‚                                       â”‚
â”‚    â”œâ”€ "ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°"                      â”‚
â”‚    â”‚  â†’ show_car_statistics_menu           â”‚
â”‚    â”‚  â†’ Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ°                      â”‚
â”‚    â”‚  â†’ show_car_statistics                â”‚
â”‚    â”‚  â†’ RentalStatistics.get_*             â”‚
â”‚    â”‚  â†’ (Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ Ğ´Ğ¾Ñ…Ğ¾Ğ´)                  â”‚
â”‚    â”‚                                       â”‚
â”‚    â””â”€ "ğŸ—‘ï¸ Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ°Ğ²Ñ‚Ğ¾"                   â”‚
â”‚       â†’ delete_car                         â”‚
â”‚       â†’ (Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ Ğ¸Ğ· Ğ‘Ğ”)                    â”‚
â”‚                                           â”‚
â”‚ 3. "ğŸ“ˆ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°"                         â”‚
â”‚    â†’ show_rental_statistics_menu           â”‚
â”‚    â†’ Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ°                         â”‚
â”‚    â†’ show_car_statistics (Ğ±ĞµĞ· car_id)      â”‚
â”‚    â†’ RentalStatistics.get_total_income    â”‚
â”‚    â†’ (ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ´Ğ¾Ñ…Ğ¾Ğ´ Ğ¾Ñ‚ Ğ²ÑĞµÑ… Ğ°Ñ€ĞµĞ½Ğ´)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—„ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ‘Ğ”

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: users
```python
- id: Integer (Primary Key)
- telegram_id: Integer (Unique) - ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Telegram
- username: String - Username Ğ² Telegram
- created_at: DateTime - Ğ’Ñ€ĞµĞ¼Ñ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸

ĞÑ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ:
- items (Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ¾ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ğ¼)
- cars (Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ¾ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ğ¼)
- rentals (Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ¾ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ğ¼)
```

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: items
```python
- id: Integer (Primary Key)
- user_id: Integer (Foreign Key â†’ users.id)
- name: String - ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
- category: Enum (ACCESSORY, THING, APARTMENT, HOUSE, CAR)
- purchase_price: Float - Ğ¦ĞµĞ½Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸
- purchase_date: DateTime - Ğ”Ğ°Ñ‚Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸
- comment: Text - ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹
- photo_file_id: String - ID Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ğ¸ Ğ¸Ğ· Telegram
- sold: Boolean - Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ (Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ½Ğ¾ Ğ¸Ğ»Ğ¸ Ğ½ĞµÑ‚)

ĞÑ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ:
- user (Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ¾ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ğ¼)
- sale (Ğ¾Ğ´Ğ¸Ğ½ Ğº Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ)
```

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: sales
```python
- id: Integer (Primary Key)
- item_id: Integer (Foreign Key â†’ items.id)
- sale_price: Float - Ğ¦ĞµĞ½Ğ° Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸
- sale_date: DateTime - Ğ”Ğ°Ñ‚Ğ° Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸

ĞÑ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ:
- item (Ğ¾Ğ´Ğ¸Ğ½ Ğº Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ)
```

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: cars
```python
- id: Integer (Primary Key)
- user_id: Integer (Foreign Key â†’ users.id)
- name: String - ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ/Ğ¼Ğ°Ñ€ĞºĞ° Ğ°Ğ²Ñ‚Ğ¾
- cost: Float - Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»Ñ
- created_at: DateTime - Ğ”Ğ°Ñ‚Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ

ĞÑ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ:
- user (Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ¾ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ğ¼)
- rentals (Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ¾ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ğ¼)
```

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: rentals
```python
- id: Integer (Primary Key)
- user_id: Integer (Foreign Key â†’ users.id)
- car_id: Integer (Foreign Key â†’ cars.id)
- price_per_hour: Float - Ğ¦ĞµĞ½Ğ° Ğ·Ğ° Ñ‡Ğ°Ñ
- hours: Integer - ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ²
- rental_start: DateTime - Ğ’Ñ€ĞµĞ¼Ñ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ°Ñ€ĞµĞ½Ğ´Ñ‹
- rental_end: DateTime - Ğ’Ñ€ĞµĞ¼Ñ Ğ¾ĞºĞ¾Ğ½Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ°Ñ€ĞµĞ½Ğ´Ñ‹
- notified: Boolean - Ğ‘Ñ‹Ğ»Ğ¾ Ğ»Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ

ĞÑ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ:
- user (Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ¾ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ğ¼)
- car (Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ¾ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ğ¼)
```

## ğŸ”€ State Machine (FSM)

### ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ¿ĞµÑ€ĞµĞºÑƒĞ¿Ğ°

```
AddItemStates:
  â”œâ”€ waiting_for_name â†’ waiting_for_category
  â”œâ”€ waiting_for_category â†’ waiting_for_price
  â”œâ”€ waiting_for_price â†’ waiting_for_comment
  â”œâ”€ waiting_for_comment â†’ waiting_for_photo
  â””â”€ waiting_for_photo â†’ (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”)

SellItemStates:
  â””â”€ waiting_for_price â†’ (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Sale)
```

### Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ°Ñ€ĞµĞ½Ğ´Ğ¾Ğ¹

```
AddCarStates:
  â”œâ”€ waiting_for_name â†’ waiting_for_cost
  â””â”€ waiting_for_cost â†’ (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”)

RentCarStates:
  â”œâ”€ waiting_for_price_per_hour â†’ waiting_for_hours
  â”œâ”€ waiting_for_hours â†’ waiting_for_end_time
  â””â”€ waiting_for_end_time â†’ (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Rental)
```

## â²ï¸ Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸

### check_rental_notifications (notifications.py)

```python
Ğ‘ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ»:
  1. ĞšĞ°Ğ¶Ğ´Ñ‹Ğµ 60 ÑĞµĞºÑƒĞ½Ğ´ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ²ÑĞµ Ğ°Ñ€ĞµĞ½Ğ´Ñ‹
  2. Ğ˜Ñ‰ĞµÑ‚ Ğ°Ñ€ĞµĞ½Ğ´Ñ‹, Ğ³Ğ´Ğµ rental_end <= current_time Ğ¸ notified == False
  3. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
  4. ĞŸĞ¾Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ ĞºĞ°Ğº notified = True
  5. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ğ¼Ğ¾ÑĞºĞ¾Ğ²ÑĞºĞ¸Ğ¹ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾ÑÑ (Europe/Moscow)
```

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

1. **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**
   - Ğ¦ĞµĞ½Ñ‹ Ğ¿Ğ°Ñ€ÑÑÑ‚ÑÑ ĞºĞ°Ğº float Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¾Ğ¹
   - Ğ’Ñ€ĞµĞ¼Ñ Ğ¿Ğ°Ñ€ÑĞ¸Ñ‚ÑÑ Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¾Ğ¹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
   - ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ÑÑ‚ÑÑ Ğ¸Ğ· ÑĞ¿Ğ¸ÑĞºĞ°

2. **Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ‘Ğ”:**
   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ SQLite Ñ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ½Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ ĞĞ¡
   - Ğ’ÑĞµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
   - Foreign Keys Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹ Ğ½Ğ° ĞºĞ°ÑĞºĞ°Ğ´Ğ½Ğ¾Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ

3. **Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ñ‚Ğ¾ĞºĞµĞ½Ğ°:**
   - BOT_TOKEN Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² `.env`
   - `.env` Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ² `.gitignore`
   - ĞĞ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ

## ğŸ“ˆ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ

### Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ

- SQLite (Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾ Ğ´Ğ»Ñ ~100K Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹)
- In-memory FSM storage (Ñ‚ĞµÑ€ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ)
- Polling (Ğ¼ĞµĞ½ĞµĞµ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²ĞµĞ½ Ñ‡ĞµĞ¼ Webhook)

### Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ

1. **Ğ‘Ğ”:** ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ½Ğ° PostgreSQL Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ³Ğ¾ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
2. **Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ:** Redis Ğ´Ğ»Ñ FSM ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
3. **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°:** Webhook Ğ²Ğ¼ĞµÑÑ‚Ğ¾ polling
4. **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** Kubernetes Ğ´Ğ»Ñ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°

## ğŸ”„ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ’ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ’ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ‘Ğ”

ĞŸÑ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹:
1. ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ: Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ½Ğµ Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹
2. Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
3. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Alembic Ğ´Ğ»Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹ Ğ¿Ñ€Ğ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğµ

### ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
pip list --outdated

# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ
pip install -U -r requirements.txt
```

---

**Ğ’ĞµÑ€ÑĞ¸Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸:** 1.0  
**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2024
